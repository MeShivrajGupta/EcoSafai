<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenSafai Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* --- General & Typography --- */
        :root {
            --bg-primary: #071025;
            --bg-secondary: #071827;
            --card-bg: #0b1220;
            --text-primary: #e6eef3;
            --text-muted: #9aa6b2;
            --accent-green: #7ad29f;
            --accent-green-dark: #43d6b9;
            --accent-yellow: #f1c40f;
            --transition-speed: 0.3s;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            --hover-shadow: 0 8px 30px rgba(122, 210, 159, 0.4);
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            background-image: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 60%);
        }
        a {
            color: var(--accent-green);
            text-decoration: none;
            transition: color var(--transition-speed);
        }
        a:hover {
            color: var(--accent-green-dark);
        }
        .cta-btn {
            background: linear-gradient(90deg, var(--accent-green), var(--accent-green-dark));
            color: var(--bg-primary);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-transform: uppercase;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            border: none;
            cursor: pointer;
        }
        .cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(122, 210, 159, 0.4);
        }
        /* --- Header --- */
        .header {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(11, 18, 32, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            padding: 1rem 2rem;
        }
        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: auto;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-green);
        }
        .search-bar-container {
            position: relative;
            width: 100%;
            max-width: 500px;
        }
        #search-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 50px;
            border: 1px solid var(--text-muted);
            background: var(--card-bg);
            color: var(--text-primary);
            transition: border-color var(--transition-speed);
        }
        #search-input:focus {
            outline: none;
            border-color: var(--accent-green);
        }
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            border: 1px solid var(--text-muted);
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            z-index: 500;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
        .search-suggestions div {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background var(--transition-speed);
        }
        .search-suggestions div:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .icon-btn {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 1.25rem;
            cursor: pointer;
            position: relative;
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -10px;
            background: var(--accent-green);
            color: var(--bg-primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .mobile-menu-btn {
            display: none;
        }
        /* --- Main Content & Layout --- */
        .main-content {
            display: flex;
            max-width: 1200px;
            margin: 2rem auto;
            gap: 2rem;
            padding: 0 2rem;
        }
        .sidebar {
            width: 250px;
            flex-shrink: 0;
            padding-top: 1rem;
        }
        .sidebar h4 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--accent-green);
        }
        .filter-group {
            margin-bottom: 1.5rem;
        }
        .checkbox-list, .radio-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .checkbox-list label, .radio-list label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        #price-range-value {
            display: block;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        .content-area {
            flex-grow: 1;
        }
        .hero-banner {
            background: url('https://images.unsplash.com/photo-1542845181-01f92e1f5799?q=80&w=2940&auto=format&fit=crop') no-repeat center center/cover;
            height: 300px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            background: rgba(0, 0, 0, 0.4);
            padding: 2rem;
            border-radius: 12px;
        }
        .hero-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(7, 24, 39, 0.8), rgba(7, 24, 39, 0.2));
            z-index: 1;
        }
        .hero-banner h1 {
            font-size: 2.5rem;
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .hero-banner p {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        .product-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            overflow: hidden;
            position: relative;
            padding-bottom: 1rem;
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--hover-shadow);
        }
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid var(--text-muted);
        }
        .product-info {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .product-info h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .product-info p {
            font-size: 0.9rem;
            color: var(--text-muted);
            flex-grow: 1;
        }
        .product-price {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-green);
            margin: 0.5rem 0;
        }
        .product-rating {
            color: var(--accent-yellow);
            font-size: 0.9rem;
        }
        .sustainability-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .product-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .add-to-cart-btn {
            background: var(--accent-green);
            color: var(--bg-primary);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color var(--transition-speed), transform var(--transition-speed);
        }
        .add-to-cart-btn:hover {
            background: var(--accent-green-dark);
            transform: scale(1.05);
        }
        .quick-add-btn-mobile {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--accent-green);
            color: var(--bg-primary);
            font-size: 1.5rem;
            border: none;
            z-index: 900;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .promo-bar {
            width: 250px;
            flex-shrink: 0;
            padding-top: 1rem;
        }
        .promo-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            text-align: center;
        }
        .promo-card h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }
        .impact-stat {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        .impact-stat i {
            color: var(--accent-green);
        }
        .promo-link {
            display: block;
            margin-top: 1rem;
        }
        /* --- Cart Drawer --- */
        .cart-drawer {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: var(--card-bg);
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            transition: right var(--transition-speed) ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .cart-drawer.open {
            right: 0;
        }
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--text-muted);
        }
        .cart-items {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem 1.5rem;
        }
        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid var(--text-muted);
        }
        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }
        .cart-item-info {
            flex-grow: 1;
        }
        .cart-item-info h4 {
            font-size: 1rem;
            color: var(--text-primary);
        }
        .cart-item-info p {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        .cart-summary {
            padding: 1.5rem;
            border-top: 1px solid var(--text-muted);
        }
        .cart-subtotal {
            display: flex;
            justify-content: space-between;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        /* --- Modals --- */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
        }
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            z-index: 1001;
            width: 90%;
            max-width: 800px;
            display: none;
            padding: 2rem;
            overflow-y: auto;
        }
        .modal-content {
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--text-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1.5rem;
            cursor: pointer;
        }
        #product-modal-body {
            display: flex;
            gap: 2rem;
        }
        #product-modal-body img {
            max-width: 50%;
            height: auto;
            border-radius: 12px;
        }
        .product-details {
            flex-grow: 1;
        }
        .product-details h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .product-details p {
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        /* --- Responsive Design --- */
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
                padding: 0 1rem;
                margin: 1rem auto;
            }
            .sidebar, .promo-bar {
                width: 100%;
            }
            .sidebar {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                background: var(--bg-primary);
                padding: 2rem;
                z-index: 1001;
                overflow-y: auto;
            }
            .sidebar.open {
                display: block;
            }
            .promo-bar {
                display: none;
            }
        }
        @media (max-width: 768px) {
            .header-inner {
                flex-wrap: wrap;
                gap: 1rem;
            }
            .header-left, .header-right {
                flex-grow: 1;
            }
            .header-left {
                order: 1;
            }
            .header-center {
                order: 3;
                flex-basis: 100%;
            }
            .header-right {
                order: 2;
                justify-content: flex-end;
            }
            .mobile-menu-btn {
                display: block;
            }
            .sidebar {
                padding: 1rem;
                border-radius: 0;
            }
            .filter-header-mobile {
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid var(--text-muted);
                padding-bottom: 1rem;
                margin-bottom: 1rem;
            }
            #product-modal-body {
                flex-direction: column;
            }
            #product-modal-body img {
                max-width: 100%;
            }
            .cart-drawer {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>
<body>
    <!-- Home Icon Link -->
<a href="index.html" class="home-icon" aria-label="Home">
    <a href="neerajweb.html"><i class="fas fa-home"></i></a>
</a>


    <header class="header">
        <div class="header-inner">
            <div class="header-left">
                <a href="#" class="logo">EcoSafai Shop</a>
            </div>
            <div class="header-center">
                <div class="search-bar-container">
                    <input type="text" id="search-input" placeholder="Search for products..." aria-label="Search products">
                    <div id="search-suggestions" class="search-suggestions"></div>
                </div>
            </div>
            <div class="header-right">
                <button id="account-btn" class="icon-btn" aria-label="Account"><i class="fas fa-user"></i></button>
                <button id="cart-btn" class="icon-btn" aria-label="Cart">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-count" class="cart-count">0</span>
                </button>
                <div class="mobile-menu-btn" id="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <aside class="sidebar">
            <div class="filter-header-mobile">
                <h3>Filters</h3>
                <button id="close-filter-btn" class="close-btn">&times;</button>
            </div>
            <h4>Filters</h4>
            <div class="filter-group">
                <label for="sort-by">Sort By:</label>
                <select id="sort-by">
                    <option value="popularity">Popularity</option>
                    <option value="newest">Newest</option>
                    <option value="price-asc">Price (Low to High)</option>
                    <option value="price-desc">Price (High to Low)</option>
                    <option value="rating">Rating</option>
                </select>
            </div>
            <div class="filter-group">
                <h4>Category</h4>
                <div class="checkbox-list" id="category-filters"></div>
            </div>
            <div class="filter-group">
                <h4>Material</h4>
                <div class="checkbox-list" id="material-filters"></div>
            </div>
            <div class="filter-group">
                <h4>Price Range</h4>
                <input type="range" id="price-range" min="0" max="2000" value="2000">
                <span id="price-range-value">Up to ₹2000</span>
            </div>
            <div class="filter-group">
                <h4>Rating</h4>
                <div class="radio-list" id="rating-filters">
                    <label><input type="radio" name="rating" value="4"> 4+ Stars</label>
                    <label><input type="radio" name="rating" value="3"> 3+ Stars</label>
                    <label><input type="radio" name="rating" value="0" checked> All</label>
                </div>
            </div>
        </aside>

        <section class="content-area">
            <div class="hero-banner">
                <div class="hero-content">
                    <h1>Shop Upcycled Kits</h1>
                    <p>Sustainable products, crafted with care.</p>
                    <a href="#" class="cta-btn">Explore Now</a>
                </div>
            </div>
            <div class="product-grid" id="product-grid"></div>
            <div class="pagination-controls">
                <button id="prev-page-btn" disabled>&lt; Previous</button>
                <span id="page-info">Page 1 of 1</span>
                <button id="next-page-btn" disabled>Next &gt;</button>
            </div>
        </section>

        <aside class="promo-bar">
            <div class="promo-card">
                <h3>Our Impact</h3>
                <p>Every purchase supports a cleaner planet and local artisans.</p>
                <div class="impact-stat">
                    <i class="fas fa-leaf"></i>
                    <span>CO₂ Saved: <strong id="co2-saved">0 kg</strong></span>
                </div>
                <div class="impact-stat">
                    <i class="fas fa-trash-restore"></i>
                    <span>Waste Diverted: <strong id="waste-diverted">0 g</strong></span>
                </div>
                <a href="#" class="promo-link">Learn More &rarr;</a>
            </div>
        </aside>
    </main>

    <div id="cart-drawer" class="cart-drawer">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button id="close-cart-btn" class="close-btn">&times;</button>
        </div>
        <div id="cart-items" class="cart-items"></div>
        <div class="cart-summary">
            <div class="cart-subtotal">
                <span>Subtotal:</span>
                <span id="cart-subtotal">₹0.00</span>
            </div>
            <button id="checkout-btn" class="cta-btn">Proceed to Checkout</button>
        </div>
    </div>
    <div id="cart-overlay" class="overlay"></div>

    <div id="product-modal" class="modal">
        <div class="modal-content">
            <button id="close-product-modal" class="close-btn">&times;</button>
            <div id="product-modal-body"></div>
        </div>
    </div>
    <div id="product-modal-overlay" class="overlay"></div>

    <div id="account-modal" class="modal">
        <div class="modal-content account-content">
            <button id="close-account-modal" class="close-btn">&times;</button>
            <h3>Welcome to GreenSafai</h3>
            <form id="login-form">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" placeholder="email@example.com" required>
                <label for="login-password">Password</label>
                <input type="password" id="login-password" placeholder="********" required>
                <button type="submit" class="cta-btn">Login</button>
            </form>
            <p>New to GreenSafai? <a href="#" id="show-signup">Sign up</a></p>
            <form id="signup-form" style="display: none;">
                <label for="signup-name">Name</label>
                <input type="text" id="signup-name" required>
                <label for="signup-email">Email</label>
                <input type="email" id="signup-email" required>
                <label for="signup-password">Password</label>
                <input type="password" id="signup-password" required>
                <button type="submit" class="cta-btn">Sign Up</button>
            </form>
        </div>
    </div>
    <div id="account-overlay" class="overlay"></div>

    <script>
        // Mock product data for demonstration
        const productData = [
            {
                "id": "p1001",
                "title": "Upcycled PET Tote Bag",
                "price": 499,
                "currency": "INR",
                "stock": 24,
                "category": "Bags",
                "materials": ["Recycled PET", "Cotton Lining"],
                "images": ["https://images.unsplash.com/photo-1596708761273-d567f2b988f5?q=80&w=2942&auto=format&fit=crop", "https://images.unsplash.com/photo-1616161476902-1590e804597b?q=80&w=2942&auto=format&fit=crop"],
                "rating": 4.6,
                "reviews": [{"user":"Anita","rating":5,"comment":"Strong & stylish!"}],
                "impact": {"waste_diverted_g": 250, "co2_saved_kg": 0.4},
                "description": "A durable and stylish tote bag made from recycled plastic bottles. Perfect for your daily needs while helping the planet."
            },
            {
                "id": "p1002",
                "title": "Compost Starter Kit",
                "price": 899,
                "currency": "INR",
                "stock": 50,
                "category": "Compost",
                "materials": ["Bamboo", "Recycled Paper"],
                "images": ["https://images.unsplash.com/photo-1563825907409-f6233a7e0892?q=80&w=2940&auto=format&fit=crop"],
                "rating": 4.8,
                "reviews": [],
                "impact": {"waste_diverted_g": 500, "co2_saved_kg": 0.8},
                "description": "Get started with home composting! This kit contains everything you need to turn your kitchen waste into nutrient-rich soil."
            },
            {
                "id": "p1003",
                "title": "Handmade Glass Planter",
                "price": 750,
                "currency": "INR",
                "stock": 15,
                "category": "Home Décor",
                "materials": ["Recycled Glass Bottles"],
                "images": ["https://images.unsplash.com/photo-1596708761273-d567f2b988f5?q=80&w=2942&auto=format&fit=crop", "https://images.unsplash.com/photo-1616161476902-1590e804597b?q=80&w=2942&auto=format&fit=crop"],
                "rating": 4.5,
                "reviews": [],
                "impact": {"waste_diverted_g": 300, "co2_saved_kg": 0.5},
                "description": "A beautiful and unique planter made from salvaged glass bottles. Perfect for succulents or small plants."
            },
            {
                "id": "p1004",
                "title": "Recycled Paper Jewelry",
                "price": 350,
                "currency": "INR",
                "stock": 30,
                "category": "Jewelry",
                "materials": ["Recycled Paper", "Metal"],
                "images": ["https://images.unsplash.com/photo-1517456722214-411a511dfd69?q=80&w=2942&auto=format&fit=crop"],
                "rating": 4.2,
                "reviews": [],
                "impact": {"waste_diverted_g": 100, "co2_saved_kg": 0.1},
                "description": "Elegant and lightweight earrings crafted from old magazines and newspapers. A sustainable statement piece."
            },
            {
                "id": "p1005",
                "title": "Woven Basket from Fabric Scraps",
                "price": 600,
                "currency": "INR",
                "stock": 10,
                "category": "Baskets",
                "materials": ["Textile Scraps"],
                "images": ["https://images.unsplash.com/photo-1627964648174-c2776c5b9671?q=80&w=2940&auto=format&fit=crop"],
                "rating": 4.9,
                "reviews": [],
                "impact": {"waste_diverted_g": 400, "co2_saved_kg": 0.7},
                "description": "A beautiful hand-woven basket made from textile scraps. Ideal for storage or as a decorative item."
            },
            {
                "id": "p1006",
                "title": "Recycled Metal Wind Chime",
                "price": 550,
                "currency": "INR",
                "stock": 8,
                "category": "Home Décor",
                "materials": ["Recycled Metal", "Wood"],
                "images": ["https://images.unsplash.com/photo-1528695078512-167e4e16c96a?q=80&w=2899&auto=format&fit=crop"],
                "rating": 4.7,
                "reviews": [],
                "impact": {"waste_diverted_g": 600, "co2_saved_kg": 0.9},
                "description": "A melodic wind chime crafted from discarded metal parts. Adds a rustic and charming touch to any space."
            }
        ];

        // UI Element Selections
        const productGrid = document.getElementById('product-grid');
        const searchInput = document.getElementById('search-input');
        const searchSuggestions = document.getElementById('search-suggestions');
        const cartBtn = document.getElementById('cart-btn');
        const cartDrawer = document.getElementById('cart-drawer');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartSubtotalEl = document.getElementById('cart-subtotal');
        const cartCountEl = document.getElementById('cart-count');
        const productModal = document.getElementById('product-modal');
        const productModalBody = document.getElementById('product-modal-body');
        const closeProductModalBtn = document.getElementById('close-product-modal');
        const accountBtn = document.getElementById('account-btn');
        const accountModal = document.getElementById('account-modal');
        const closeAccountModalBtn = document.getElementById('close-account-modal');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const showSignupLink = document.getElementById('show-signup');
        const sidebar = document.querySelector('.sidebar');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeFilterBtn = document.getElementById('close-filter-btn');
        const filterCheckboxes = document.querySelectorAll('.checkbox-list');
        const sortBySelect = document.getElementById('sort-by');
        const priceRange = document.getElementById('price-range');
        const priceRangeValue = document.getElementById('price-range-value');
        const co2SavedEl = document.getElementById('co2-saved');
        const wasteDivertedEl = document.getElementById('waste-diverted');

        let cart = JSON.parse(localStorage.getItem('cart')) || {};

        // --- Core Functionality ---
        function renderProducts(products) {
            productGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.id = product.id;
                
                const ratingStars = '⭐'.repeat(Math.floor(product.rating)) + (product.rating % 1 !== 0 ? '✨' : '');
                
                productCard.innerHTML = `
                    <div class="sustainability-badge">Upcycled • Handmade</div>
                    <img src="${product.images[0]}" alt="${product.title}" class="product-image" loading="lazy">
                    <div class="product-info">
                        <h3>${product.title}</h3>
                        <p>${product.description.split('.')[0]}.</p>
                        <div class="product-rating">${ratingStars} ${product.rating}</div>
                        <div class="product-price">₹${product.price}</div>
                        <button class="add-to-cart-btn" data-id="${product.id}">Add to Cart</button>
                    </div>
                `;
                productGrid.appendChild(productCard);
            });
            
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('add-to-cart-btn')) {
                        const productId = card.dataset.id;
                        showProductModal(productId);
                    }
                });
            });
        }

        function updateCartCount() {
            const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
            cartCountEl.textContent = totalItems;
            cartCountEl.style.display = totalItems > 0 ? 'flex' : 'none';
        }

        function renderCart() {
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;
            for (const id in cart) {
                const item = cart[id];
                const cartItemEl = document.createElement('div');
                cartItemEl.className = 'cart-item';
                cartItemEl.innerHTML = `
                    <img src="${item.images[0]}" alt="${item.title}">
                    <div class="cart-item-info">
                        <h4>${item.title}</h4>
                        <p>Qty: ${item.quantity}</p>
                        <p>₹${item.price * item.quantity}</p>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemEl);
                subtotal += item.price * item.quantity;
            }
            cartSubtotalEl.textContent = `₹${subtotal.toFixed(2)}`;
            updateCartCount();
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function addToCart(productId) {
            const product = productData.find(p => p.id === productId);
            if (!product) return;
            
            if (cart[productId]) {
                cart[productId].quantity++;
            } else {
                cart[productId] = { ...product, quantity: 1 };
            }
            
            renderCart();
            
            // Add to cart animation (simple fly-to-cart)
            const productCard = document.querySelector(`.product-card[data-id="${productId}"]`);
            if (productCard) {
                const flyingImg = productCard.querySelector('img').cloneNode();
                flyingImg.style.position = 'fixed';
                flyingImg.style.width = '50px';
                flyingImg.style.height = '50px';
                flyingImg.style.zIndex = '9999';
                flyingImg.style.borderRadius = '50%';
                flyingImg.style.transition = 'all 0.6s ease-in-out';
                
                const rect = productCard.getBoundingClientRect();
                flyingImg.style.left = rect.left + 'px';
                flyingImg.style.top = rect.top + 'px';
                
                document.body.appendChild(flyingImg);
                
                const cartRect = cartBtn.getBoundingClientRect();
                
                setTimeout(() => {
                    flyingImg.style.left = cartRect.left + 'px';
                    flyingImg.style.top = cartRect.top + 'px';
                    flyingImg.style.width = '0';
                    flyingImg.style.height = '0';
                    flyingImg.style.opacity = '0';
                }, 50);
                
                setTimeout(() => {
                    flyingImg.remove();
                }, 650);
            }
        }

        function showProductModal(productId) {
            const product = productData.find(p => p.id === productId);
            if (!product) return;
            
            productModalBody.innerHTML = `
                <div class="product-image-gallery">
                    <img src="${product.images[0]}" alt="${product.title}" class="main-image">
                </div>
                <div class="product-details">
                    <h3>${product.title}</h3>
                    <div class="product-price">₹${product.price}</div>
                    <div class="product-rating">Rating: ${product.rating}</div>
                    <p>${product.description}</p>
                    <p><strong>Materials:</strong> ${product.materials.join(', ')}</p>
                    <div class="environmental-impact">
                        <h4>Environmental Impact:</h4>
                        <p><i class="fas fa-smog"></i> Estimated CO₂ Saved: ${product.impact.co2_saved_kg} kg</p>
                        <p><i class="fas fa-trash-restore-alt"></i> Waste Diverted: ${product.impact.waste_diverted_g} g</p>
                    </div>
                    <button class="cta-btn add-to-cart-btn" data-id="${product.id}">Add to Cart</button>
                </div>
            `;
            
            document.querySelector('#product-modal-body .add-to-cart-btn').addEventListener('click', (e) => {
                addToCart(e.target.dataset.id);
                productModal.style.display = 'none';
                document.getElementById('product-modal-overlay').style.display = 'none';
                cartDrawer.classList.add('open');
            });

            productModal.style.display = 'block';
            document.getElementById('product-modal-overlay').style.display = 'block';
        }

        function updateSustainabilityStats() {
            let totalCO2 = 0;
            let totalWaste = 0;
            productData.forEach(p => {
                if (p.impact) {
                    totalCO2 += p.impact.co2_saved_kg * (cart[p.id] ? cart[p.id].quantity : 0);
                    totalWaste += p.impact.waste_diverted_g * (cart[p.id] ? cart[p.id].quantity : 0);
                }
            });
            co2SavedEl.textContent = `${totalCO2.toFixed(1)} kg`;
            wasteDivertedEl.textContent = `${totalWaste} g`;
        }

        // --- Event Listeners ---
        cartBtn.addEventListener('click', () => {
            cartDrawer.classList.toggle('open');
            document.getElementById('cart-overlay').style.display = 'block';
        });

        closeCartBtn.addEventListener('click', () => {
            cartDrawer.classList.remove('open');
            document.getElementById('cart-overlay').style.display = 'none';
        });

        document.getElementById('cart-overlay').addEventListener('click', () => {
            cartDrawer.classList.remove('open');
            document.getElementById('cart-overlay').style.display = 'none';
        });

        productGrid.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart-btn')) {
                addToCart(e.target.dataset.id);
                cartDrawer.classList.add('open');
            }
        });

        closeProductModalBtn.addEventListener('click', () => {
            productModal.style.display = 'none';
            document.getElementById('product-modal-overlay').style.display = 'none';
        });

        document.getElementById('product-modal-overlay').addEventListener('click', () => {
            productModal.style.display = 'none';
            document.getElementById('product-modal-overlay').style.display = 'none';
        });

        accountBtn.addEventListener('click', () => {
            accountModal.style.display = 'block';
            document.getElementById('account-overlay').style.display = 'block';
        });

        closeAccountModalBtn.addEventListener('click', () => {
            accountModal.style.display = 'none';
            document.getElementById('account-overlay').style.display = 'none';
        });

        document.getElementById('account-overlay').addEventListener('click', () => {
            accountModal.style.display = 'none';
            document.getElementById('account-overlay').style.display = 'none';
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            // Mock login logic
            localStorage.setItem('user', email);
            alert('Logged in successfully!');
            accountModal.style.display = 'none';
            document.getElementById('account-overlay').style.display = 'none';
        });

        showSignupLink.addEventListener('click', (e) => {
            e.preventDefault();
            loginForm.style.display = 'none';
            signupForm.style.display = 'block';
            e.target.style.display = 'none';
        });

        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            // Mock signup logic
            localStorage.setItem('user', name);
            alert('Signed up successfully! You can now log in.');
            signupForm.style.display = 'none';
            loginForm.style.display = 'block';
            showSignupLink.style.display = 'inline';
        });

        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        closeFilterBtn.addEventListener('click', () => {
            sidebar.classList.remove('open');
        });

        // --- Filter and Search Logic ---
        function getActiveFilters() {
            const activeFilters = {
                category: [],
                material: [],
                rating: 0,
                price: priceRange.value
            };
            
            document.querySelectorAll('#category-filters input:checked').forEach(input => {
                activeFilters.category.push(input.value);
            });
            
            document.querySelectorAll('#material-filters input:checked').forEach(input => {
                activeFilters.material.push(input.value);
            });
            
            const selectedRating = document.querySelector('input[name="rating"]:checked');
            if (selectedRating) {
                activeFilters.rating = parseInt(selectedRating.value, 10);
            }
            
            return activeFilters;
        }

        function filterAndSortProducts() {
            let filteredProducts = [...productData];
            const filters = getActiveFilters();
            const searchTerm = searchInput.value.toLowerCase();
            
            // Search Filter
            if (searchTerm) {
                filteredProducts = filteredProducts.filter(p =>
                    p.title.toLowerCase().includes(searchTerm) ||
                    p.description.toLowerCase().includes(searchTerm) ||
                    p.materials.some(m => m.toLowerCase().includes(searchTerm))
                );
            }
            
            // Category Filter
            if (filters.category.length > 0) {
                filteredProducts = filteredProducts.filter(p => filters.category.includes(p.category));
            }
            
            // Material Filter
            if (filters.material.length > 0) {
                filteredProducts = filteredProducts.filter(p => p.materials.some(m => filters.material.includes(m)));
            }
            
            // Rating Filter
            filteredProducts = filteredProducts.filter(p => p.rating >= filters.rating);
            
            // Price Filter
            filteredProducts = filteredProducts.filter(p => p.price <= filters.price);
            
            // Sorting
            const sortBy = sortBySelect.value;
            switch (sortBy) {
                case 'price-asc':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'rating':
                    filteredProducts.sort((a, b) => b.rating - a.rating);
                    break;
                case 'popularity':
                default:
                    // Placeholder for popularity logic
                    break;
            }
            
            renderProducts(filteredProducts);
        }

        // Generate filter options dynamically
        function generateFilters() {
            const categories = [...new Set(productData.map(p => p.category))];
            const materials = [...new Set(productData.flatMap(p => p.materials))];

            const categoryFilterEl = document.getElementById('category-filters');
            categories.forEach(cat => {
                categoryFilterEl.innerHTML += `<label><input type="checkbox" value="${cat}"> ${cat}</label>`;
            });

            const materialFilterEl = document.getElementById('material-filters');
            materials.forEach(mat => {
                materialFilterEl.innerHTML += `<label><input type="checkbox" value="${mat}"> ${mat}</label>`;
            });
        }

        // Event listeners for filters and search
        document.querySelectorAll('.filter-group').forEach(group => {
            group.addEventListener('change', filterAndSortProducts);
        });

        sortBySelect.addEventListener('change', filterAndSortProducts);
        searchInput.addEventListener('input', filterAndSortProducts);
        priceRange.addEventListener('input', (e) => {
            priceRangeValue.textContent = `Up to ₹${e.target.value}`;
            filterAndSortProducts();
        });

        // Initial render
        document.addEventListener('DOMContentLoaded', () => {
            generateFilters();
            renderProducts(productData);
            renderCart();
            updateSustainabilityStats();
        });
    </script>
</body>
</html>